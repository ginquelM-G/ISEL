'use strict';

var somefilter = require('somefilter');
var checkResult = function checkResult(value) {
    return value && value.length;
};
var limier = somefilter(checkResult, [findByAbr, findByName]);

module.exports = function (pattern, list) {
    check(pattern, list);

    return limier(pattern, list) || [];
};

function findByName(str, names) {
    return names.filter(function (name) {
        return ~name.indexOf(str);
    });
}

function findByAbr(str, names) {
    var regstr = str.split('').join('.*') + '.*';
    var regexp = RegExp('^' + regstr + '$', 'i');

    return names.filter(function (name) {
        return regexp.test(name);
    });
}

function check(pattern, list) {
    if (typeof pattern !== 'string') throw Error('pattern should be string!');

    if (!Array.isArray(list)) throw Error('list should be an array!');
}